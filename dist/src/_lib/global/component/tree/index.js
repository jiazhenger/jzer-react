import e from"../../../../../node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import t from"../../../../../node_modules/@babel/runtime/helpers/esm/createClass.js";import r from"../../../../../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js";import n from"../../../../../node_modules/@babel/runtime/helpers/esm/inherits.js";import o from"../../../../../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js";import s from"../../../../../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js";import i from"../../../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js";import a from"../../../../../node_modules/@babel/runtime/helpers/esm/extends.js";import l from"../../../../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js";import c from"../../../../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import m from"react";import u from"../../../../../node_modules/@ant-design/icons/es/icons/MinusCircleOutlined.js";import d from"../../../../../node_modules/@ant-design/icons/es/icons/PlusCircleOutlined.js";import p from"../../../../../node_modules/@ant-design/icons/es/icons/CheckOutlined.js";function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=s(e);if(t){var i=s(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return o(this,r)}}var h=window,y=h.$fn,k=h.$lazy.load((function(){return import("../../plugin/antd/empty.js")})),b=config.mainColor,v=function e(t,r,n,o,s){return y.hasArray(t)&&t.forEach((function(t,i){var a=t[n];if(t.open=r,y.hasArray(a)?e(a,r,n,o,s):(t.checked=!1,s.forEach((function(e){t[o]===e&&(t.checked=!0)}))),y.hasArray(a)){var l=a.some((function(e){return e.checked})),c=a.some((function(e){return e.open}));l&&(t.open=!0),c&&(t.open=!0)}})),t},C=function e(t){var r=t.nameStr,n=t.idStr,o=t.childStr,s=t.isChild,i=t.onClick,f=t.open,h=t.index,k=t.show,C=t.isFirst,S=t.ids,g=m.useState([]),E=c(g,2),j=E[0],_=E[1],x=s?{marginLeft:"2em"}:null;m.useEffect((function(){var e=t.data;if(C){var r=v(e,f,o,n,S);_(l(r))}else _(l(e))}),[t.data,f,o,C,n,S]);var A=function(e,t){e.stopPropagation(),y.hasArray(t[o])?t.open=!t.open:(t.checked=!t.checked,i&&i(t)),_(l(j))};return m.createElement("ul",{style:{display:k?"block":"none"}},y.hasArray(j)&&j.map((function(s,i){return m.createElement("li",{key:i,className:"cp",style:x,index:h,onClick:function(e){A(e,s)}},m.createElement("div",{className:"fxm tap",style:{padding:"5px 10px"}},y.hasArray(s[o])&&(s.open?m.createElement(u,{style:{color:b}}):m.createElement(d,null)),m.createElement("span",{className:"ml5 ex"},s[r]),!y.hasArray(s[o])&&s.checked&&m.createElement(p,{style:{color:b}})),y.hasArray(s[o])?m.createElement(e,a({},t,{data:s[o],nameStr:r,idStr:n,childStr:o,open:s.open,show:s.open,index:h+"-"+i,isFirst:!1,isChild:!0})):null)})))},S=function(o){n(a,o);var s=f(a);function a(){var t;e(this,a);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return t=s.call.apply(s,[this].concat(o)),i(r(t),"state",{ids:[]}),i(r(t),"keys",[]),i(r(t),"onClick",(function(e){var r=t.props,n=r.idStr,o=r.onChange,s=n||"id";e.checked?(t.keys.push(e),t.keys=Array.from(new Set(t.keys))):t.keys.forEach((function(r,n){r[s]===e[s]&&t.keys.splice(n,1)})),o&&o(t.keys)})),i(r(t),"clear",(function(){t.keys=[],y.refresh(r(t))})),i(r(t),"setDefaultKeys",(function(e){t.setState({ids:e})})),t}return t(a,[{key:"getSelect",value:function(){return this.keys}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.idStr,o=e.nameStr,s=e.childStr,i=e.open,a=e.loading,l=this.state,c=l.key,u=l.ids,d=void 0!==i&&i,p=n||"id",f=o||"name";return m.createElement("section",{className:"".concat(r||"")},m.createElement(k,{data:t,loading:a,height:"200px"},m.createElement(C,{data:t,ids:u,onClick:this.onClick,nameStr:f,idStr:p,childStr:s,index:0,open:d,key:c,show:!0,isFirst:!0})))}}]),a}(m.Component);export{S as default};
