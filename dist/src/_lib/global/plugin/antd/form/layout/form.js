import e from"../../../../../_node/@babel/runtime/helpers/esm/extends.js";import t from"../../../../../_node/@babel/runtime/helpers/esm/defineProperty.js";import r from"../../../../../_node/@babel/runtime/helpers/esm/slicedToArray.js";import n from"react";import{Form as a}from"antd";import l from"../../../../../common/utils/time.js";function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o=window,s=o.$fn,u=o.$,c=function(o,c){var d=o.children,m=o.className,f=o.style,p=o.data,h=o.param,v=o.hideErrorText,b=o.name,g=o.dir,y=o.labelAlign,F=o.onSubmit,O=o.onChange,j=o.onNameChange,V=o.antd,E=a.useForm(),w=r(E,1)[0];V=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?i(Object(n),!0).forEach((function(r){t(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:"".concat(u.css(m)," ").concat(u.css(v,"hideErrorText")),name:b,form:w,style:f,labelAlign:y,layout:"x"===g?"horizontal":"vertical"},V);var P=n.useCallback((function(e,t){var r=null!=t?t:{};return e=0===arguments.length?p:s.getResult(e),s.hasArray(e)&&e.forEach((function(e){s.hasObject(e)&&(s.isNotEmpty(e.value)||s.isNotEmpty(e.defaultValue))&&(r[e.name]=s.isString(e.type)&&e.type.includes("date-range")&&e.defaultValue?l.duration[e.defaultValue]():e.value)})),s.hasObject(r)&&w.setFieldsValue(r),r}),[p,w]);return n.useImperativeHandle(c,(function(){return{submit:function(){return w.submit()},setValue:function(){if(1===arguments.length){var e=arguments[0];if(s.hasObject(e))w.setFieldsValue(e);else{var r={};s.hasArray(p)&&p.forEach((function(e){var t=e.name;e.value,r[t]=""})),w.setFieldsValue(r)}}else 2===arguments.length?w.setFieldsValue(t({},arguments[0],arguments[1])):w.setFieldsValue({})},setEmptyValue:function(e){var t={};s.hasArray(p)&&p.forEach((function(r){var n=r.name;e[n]?t[n]=e[n]:t[n]=""})),w.setFieldsValue(t)},reset:function(e){w.resetFields(e),P(p,h)},getValue:function(e){return s.isString(e)?w.getFieldValue(e):w.getFieldsValue()},getName:function(e){return s.isString(e)?t({},e,w.getFieldValue(e)):w.getFieldsValue()},setDefaultValue:P,validate:function(){return w.validateFields()}}})),n.createElement(a,e({onFinishFailed:function(e){var t,r,n=e.errorFields;s.hasArray(n)&&(s.msg.warning(null===(t=n[0])||void 0===t||null===(r=t.errors)||void 0===r?void 0:r[0]),w.scrollToField(b))},onFinish:function(e){return w.validateFields().then((function(t){return null==F?void 0:F(e)}))},onValuesChange:function(e,t){return null==O?void 0:O({value:e,values:t})},onFieldsChange:function(e,t){return null==j?void 0:j({name:e,names:t})}},V),d)};export{c as default};
