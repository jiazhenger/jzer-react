import e from"../../../_node/@babel/runtime/helpers/esm/extends.js";import o from"../../../_node/@babel/runtime/helpers/esm/defineProperty.js";import t from"../../../_node/@babel/runtime/helpers/esm/toConsumableArray.js";import n from"../../../_node/@babel/runtime/helpers/esm/slicedToArray.js";import l,{useState as r,useCallback as i,useEffect as c,useImperativeHandle as a}from"react";import{Modal as d}from"antd";function s(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);o&&(n=n.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))}))}return e}var m=window,f=m.$lazy,p=m.$,v=m.$fn,b=f.load((function(){return import("../../../private/component/temp/Controls.js")})),j=f.load((function(){return import("./loading.js")})),y=function(o,s){var m,f,y=r(o),O=n(y,2),h=O[0],g=O[1],w=h.style,z=h.children,C=h.slot,P=h.onClose,E=h.onOk,R=h.onOpenBefore,k=h.onOpen,x=h.onOpenClose,S=h.onCancel,D=h.onReset,N=h.scroll,_=void 0===N||N,A=h.full,T=void 0!==A&&A,$=h.destroy,H=void 0===$||$,B=h.loading,q=h.disabled,F=h.loadingSize,G=h.mode,I=h.formRef,J=h.title,K=h.subTitle,L=h.titleAfter,M=h.titleRight,Q=h.center,U=void 0===Q||Q,V=h.controls,W=void 0===V?{}:V,X=h.open,Y=h.width,Z=h.height,ee=h.antd,oe=void 0===ee?{}:ee,te=i((function(){ce(!1)}),[]);c((function(){g(o)}),[o]);var ne=i((function(e){var o=h.add,n=h.mod;if(e=v.getResult(e,{close:te,formRef:I,add:o,mod:n}),v.isObject(e)){var l=e,r=l.ok,i=l.cancel,c=l.reset,a=void 0===c?0:c,d=l.before,s=void 0===d?[]:d,m=l.after,f=void 0===m?[]:m;return!1!==i&&0!==i||(i={hide:!0}),!1!==r&&0!==r||(r={hide:!0}),!1!==a&&0!==a||(a={hide:!0}),[].concat(t(s),[u({label:"取消",type:"default",click:function(){var o,t,n=null!==(o=null===(t=e)||void 0===t?void 0:t.onCancel)&&void 0!==o?o:S;!1!==(null==n?void 0:n(te))&&te()}},i),u({label:"重置",type:"default",click:function(){var o,t,n,l;null===(o=I())||void 0===o||null===(t=o.reset)||void 0===t||t.call(o);var r=null!==(n=null===(l=e)||void 0===l?void 0:l.onReset)&&void 0!==n?n:D;(null==r?void 0:r({close:te,formRef:I}))&&te()}},a),u({label:"确认",click:function(){!0===(null==E?void 0:E({close:te,formRef:I}))&&te()}},r)],t(f))}return e}),[I,D,te,S,E,h]),le=r(X),re=n(le,2),ie=re[0],ce=re[1];c((function(){setTimeout((function(){ie?null==k||k():null==P||P(),null==x||x(ie)}))}),[ie,k,P,x]);var ae=function(e){null==R||R(),ce(!0),v.hasObject(e)&&g(e)},de=!1!==W||0!==W?45:0,se=J?40:0,ue=_?document.body.clientHeight-de-se+"px":"100%",me=ne(W),fe=!1!==W&&0!==W?l.createElement(b,{data:me,align:null!==(m=null==W?void 0:W.align)&&void 0!==m?m:"center",size:null!==(f=null==W?void 0:W.size)&&void 0!==f?f:"middle",disabled:q,loading:B}):null;return T&&(Y="100%",Z="100%"),oe=u({title:v.isString(J)?l.createElement("div",{className:"f13 ".concat(U?"fxmc":"fxm")},l.createElement("b",{className:"f15"},J),K&&l.createElement("span",{className:"c0 n ml5"},"( ",K," )"),L,M):J,open:ie,footer:fe,width:Y,height:Z,destroyOnClose:H,maskClosable:!1,wrapClassName:"jzer-modal-wrap ".concat(p.css(_,"jzer-modal-scroll")," ").concat(p.css(T,"jzer-modal-full")," ").concat(p.css(G,"jzer-modal-mode-"+G)," ").concat(p.css(B,"jzer-modal-scroll-hidden")),bodyStyle:u({padding:10,maxHeight:ue},w)},oe),a(s,(function(){return{open:ae,close:te}})),l.createElement(d,e({onCancel:te},oe),z,p.cpt(C),l.createElement(j,{loading:B,size:F,style:{position:_?"fixed":"absoulte"}}))};export{y as default};
