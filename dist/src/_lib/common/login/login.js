import e from"../../../../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js";import r from"../../../../node_modules/@babel/runtime/regenerator/index.js";var t=function(){var t=e(r.mark((function e(t){var n,o,a,s,i,u,c;return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.history,o=t.to,a=t.data,s=window,i=s.$fn,u=s.$,i.local("user",a),i.msg.success("登录成功"),c=i.getSkipRecord(),e.next=7,u.getMenu(!0);case 7:n.replace(c||o);case 8:case"end":return e.stop()}}),e)})));return function(e){return t.apply(this,arguments)}}(),n=function(n){var o=n.api,a=n.history,s=n.setAjax,i=n.param,u=n.to,c=void 0===u?"/index":u,p=n.onSuccess;window.$http.post(s,o,{param:i,token:!1,loadingText:"登录中"}).then(function(){var n=e(r.mark((function e(n){return r.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({history:a,to:c,data:n});case 2:null==p||p();case 3:case"end":return e.stop()}}),e)})));return function(e){return n.apply(this,arguments)}}())};export{n as login,t as loginSuccess};
