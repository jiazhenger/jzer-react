import e from"../../../_node/@babel/runtime/helpers/esm/extends.js";import t from"../../../_node/@babel/runtime/helpers/esm/defineProperty.js";import n from"../../../_node/@babel/runtime/helpers/esm/toConsumableArray.js";import r from"../../../_node/@babel/runtime/helpers/esm/slicedToArray.js";import o,{useRef as l,useState as a,useCallback as i,useEffect as c,useImperativeHandle as s}from"react";import u from"./item/item-list.js";import d from"../../../_node/@ant-design/icons/es/icons/DownCircleOutlined.js";function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=window,g=p.$lazy,b=p.$fn,v=p.$,h=p.$config,y=g.hook((function(){return import("../../../global/plugin/antd/form/layout/form.js")})),j=g.load((function(){return import("../../../global/plugin/antd/form/layout/item.js")})),O=g.load((function(){return import("../temp/Controls.js")})),x=function(t,m){var p=t.className,g=t.style,x=t.data,w=t.onInit,C=t.onChange,E=t.onChanged,R=t.onSubmit,z=t.onReset,P=t.loading,N=t.disabled,S=t.readOnly,k=t.size,D=void 0===k?"search":k,_=t.dir,q=void 0===_?"x":_,$=t.x,A=void 0===$||$,I=t.colon;t.resetText,t.hideReset;var T,H,L=t.width,W=t.controls,X=void 0===W?{}:W,Y=t.cache,F=void 0===Y?h.cache:Y,V=t.openPos,B=t.show,G=void 0===B||B,J=t.labelWidth,K=t.padding,M=void 0===K?8:K,Q=t.param,U=t.query,Z=t.prefix,ee=t.suffix,te=t.gapX,ne=void 0===te?8:te,re=t.gapY,oe=void 0===re?5:re,le=l(),ae=a(!1),ie=r(ae,2),ce=ie[0],se=ie[1],ue=a(!0),de=r(ue,2),me=de[0],fe=de[1];b.isObject(X)&&(X.align=null!==(T=null==X?void 0:X.align)&&void 0!==T?T:"center",X.size=null!==(H=null==X?void 0:X.size)&&void 0!==H?H:"middle");var pe=i((function(e){var t=b.getResult(X,{formRef:e});if(b.isObject(t)){var r=t.search,o=t.reset,l=t.before,a=void 0===l?[]:l,i=t.after,c=void 0===i?[]:i;return a=b.getResult(a),c=b.getResult(c),[].concat(n(a),[f({label:"重置",ghost:1,mode:"reset",click:function(){var t;null==e||null===(t=e.reset)||void 0===t||t.call(e),null==z||z(e)}},o),f({label:"搜索",mode:"search",click:null==e?void 0:e.submit,ghost:1,disabled:N},r)],n(c)).map((function(e){return f({disabled:N},e)}))}return X}),[N,X,z]);c((function(){return we(pe(le))}),[N]);var ge=l(),be=a(b.getResult(x)),ve=r(be,2),he=ve[0],ye=ve[1],je=a([]),Oe=r(je,2),xe=Oe[0],we=Oe[1],Ce=0,Ee={padding:"".concat(b.strToNum(M),"px 0 ")};A||(Ce=oe,X.align="center"!==X.align?X.align:"start");var Re={size:D,colon:I,width:L,readOnly:S,onChanged:E,gapX:ne,gapY:oe,x:A,cache:F,labelWidth:J,data:he,mt:0,isSearch:!0,disabled:N||P,className:v.css(A,"ex"),onInit:function(){if(V){var e=ge.current.children[0].clientHeight;fe(e<=26)}}},ze=o.createElement(u,Re),Pe=function(e){b.hasArray(e)?ye(n(e)):ye((function(e){return n(e)}))};return s(m,(function(){return{ref:function(){return f(f({},v.ref(le)),{},{update:Pe,updateControls:function(){return we(pe(v.ref(le)))}})}}})),o.createElement(y,{ref:le,className:"jzer-form jzer-form-".concat(D," ").concat(v.css(A,"fx")," rel ").concat(v.css(p)," ").concat(v.css(J)),style:f(f({zIndex:2,display:G?"flex":"none"},Ee),g),dir:q,onChange:C,onNameChange:function(e){},data:he,param:Q,onRef:function(e){Q=b.getResult(Q);var t=f(f({},U=b.getResult(U)),Q);e.setDefaultValue(he,Q),null==w||w({formRef:e,param:Q,query:U,queryParam:t}),we(pe(e))},onSubmit:function(e){Q=b.getResult(Q),U=b.getResult(U),Q=f(f({},Q),e),null==R||R({param:Q,query:U})}},o.createElement(o.Fragment,null,Z,V?o.createElement("div",{className:"ease ex",style:{height:ce?ge.current.children[0].clientHeight:26,overflow:"hidden"},ref:ge},ze):ze,ee),!1!==X&&o.createElement(j,e({label:" ",colon:!1,mt:Ce},null==X?void 0:X.item),me&&!V?o.createElement(O,e({loading:P,align:null==X?void 0:X.align,size:D,data:xe},null==X?void 0:X.config)):o.createElement("div",{className:"fxm"},o.createElement(O,e({loading:P,align:null==X?void 0:X.align,size:D,data:xe},null==X?void 0:X.config)),"right"===V&&A&&o.createElement(d,{className:"open-handle ease  ".concat(v.css(ce,"rotate-up")),style:{color:h.mainColor,marginLeft:5,fontSize:20,cursor:"pointer"},onClick:function(){return se((function(e){return!e}))}}))),"center"===V&&A&&!me&&o.createElement("div",{className:"abs_lb w fxmc",style:{bottom:-12}},o.createElement(d,{className:"open-handle ease  ".concat(v.css(ce,"rotate-up")),style:{color:h.mainColor,marginLeft:5,fontSize:20,cursor:"pointer"},onClick:function(){return se((function(e){return!e}))}})))};export{x as default};
