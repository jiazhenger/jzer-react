import e from"../../_node/@babel/runtime/helpers/esm/extends.js";import r from"../../_node/@babel/runtime/helpers/esm/defineProperty.js";import t from"react";import{Route as n,Redirect as a,Switch as o}from"react-router-dom";import{CacheRoute as c,CacheSwitch as l}from"react-cache-router";import{getRedirect as i,existHttp as u,getRootUrl as m}from"./utils/index.js";import p from"../../common/react/lazy/lazy-router.js";function s(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}var d=window.$fn,h=function(r){return function(r){var s=r.data,h=r.rootPath,y=r.mainPath,b=void 0===y?"/main":y,O=r.hasFolder,j=r.redirect;return j||(j=i(s)),d.hasArray(s)?function r(i){var s=i.data,y=i.url,v=i.isChild,g=v?l:o;return d.hasArray(s)&&t.createElement(g,null,s.map((function(a,o){var l=a.children,i=a.path,s=a.child,j=a.component,v=a.cache,g=a.exact;y&&(y=y&&-1!==y.indexOf("/")?y:"/"+y,i="".concat(y,"/").concat(i));var P={key:i,path:i};if(d.hasArray(l))P=f(f({},P),{},{render:function(e){var t=e.match;return r({data:l,url:y?t.url:null})}});else if(d.hasArray(s))P={key:i,path:i,render:function(e){var t=e.match;return r({data:s,url:y?t.url:null,isChild:!0,exact:g})}};else if(u(i))P=null;else{if(d.isNotEmpty(j))j=j.replace(/^\//g,"");else if(j=i,!1===O&&h.includes(b)){var E=m(j);j=j.replace(new RegExp("^".concat(E,"/"),"g"),"")}else j=j?j.replace(/^\//g,""):null;P=j?f(f({},P),{},{component:p(j)}):null}return P?v?t.createElement(c,e({key:i},P)):t.createElement(n,e({key:i},P)):null})),j&&!v&&t.createElement(n,{path:h,children:t.createElement(a,{to:j})}),t.createElement(n,{component:p("404")}))}({data:s}):null}(r)};export{h as default};
