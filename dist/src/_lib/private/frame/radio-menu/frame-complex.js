import e from"../../../_node/@babel/runtime/helpers/esm/slicedToArray.js";import t,{useState as r,useEffect as n}from"react";import{useHistory as o}from"react-router-dom";import l from"./utils/setComplexFirstRouter.js";import c from"./utils/getRouter.js";import{getRootPath as i,getChildren as a,hasPath as s}from"../utils/index.js";import u from"./cpt/menu.js";import m from"../cpt/user-control.js";import f from"../../../_node/@ant-design/icons/es/icons/MenuUnfoldOutlined.js";import d from"../../../_node/@ant-design/icons/es/icons/MenuFoldOutlined.js";var p=window,h=p.$lazy,v=p.$,E=p.$fn,y=h.load((function(){return import("../../../global/template/scroll.js")})),j=h.load((function(){return import("../router.js")})),x=h.load((function(){return import("../cpt/menu-top.js")})),g=function(p){var h=p.openAll,g=r([]),w=e(g,2),N=w[0],b=w[1],A=r([]),T=e(A,2),k=T[0],C=T[1],_=r(),F=e(_,2),M=F[0],R=F[1],S=r(0),$=e(S,2),q=$[0],z=$[1],O=r(i()),P=e(O,1)[0],U=o();n((function(){v.getMenu().then((function(e){e=c(a(e,P),P,h),b(e,P),C((function(){var t=window.location.hash.replace("#",""),r=[];if(P!==t){var n,o=e.filter((function(e){return s(t,e.path)}));r=E.hasArray(o)&&null!==(n=o[0].children)&&void 0!==n?n:[]}else{var l;r=E.hasArray(e)&&null!==(l=e[0].children)&&void 0!==l?l:[]}return r}))}))}),[U,P,h]),n((function(){setTimeout((function(){var e=document.querySelector("#active");e&&(document.querySelector("#scroll").scrollTop=e.offsetTop)}),300),window.refreshRouter=function(){return z((function(e){return e+1}))}}),[]);return t.createElement("section",{className:"fix_full fv"},t.createElement("header",{className:"h50 bcf fx"},t.createElement("div",{style:{width:200,fontSize:26},className:"h fxmc cp tap c0",onClick:function(){return U.replace("/index")}},"logo"),t.createElement("span",{className:"cp c0 f18 tap h fxmc",style:{width:50},onClick:function(){return R((function(e){return!e}))}},M?t.createElement(f,null):t.createElement(d,null)),t.createElement(x,{data:N,rootPath:P,onClick:function(e){return function(e){return C(l(e,h))}(e)}}),t.createElement(m,{api:"user/logout"})),t.createElement("div",{className:"ex fx",style:{marginTop:1}},t.createElement("div",{className:"h rel bcf",style:{width:200},hidden:M},t.createElement(y,{id:"scroll",scroll:"oys"},t.createElement(u,{data:k,openAll:h}))),t.createElement("div",{className:"ex rel",style:{margin:5}},t.createElement(j,{data:k,rootPath:P,hasFolder:!1,key:q}))))};export{g as default};
