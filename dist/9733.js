"use strict";(self.webpackChunkjzer_react_template=self.webpackChunkjzer_react_template||[]).push([[9733,5608,9375],{73906:function(e,n){var l={xlsx:"vnd.openxmlformats-officedocument.spreadsheetml.sheet",xls:"vnd.ms-excel",pdf:"pdf",word:"vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text"},t={blob:function(e,n){var t=null!=n?n:{},o=t.fileType,r=void 0===o?"xlsx":o,i=t.fileName,a=void 0===i?"download":i,d=window.URL||window.webkitURL||window,u=new Blob([e],{type:"application/".concat(l[r],"; charset=utf-8")}),c=document.createElement("a");c.href=d.createObjectURL(u),c.download=a,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)},form:function(e){var n=document.createElement("form");n.method="post",n.action=window.$config.api()+e,n.target="_blank";var l=document.createElement("input");l.type="hidden",l.name="token",l.value=window.$fn.getToken(),n.appendChild(l),document.body.appendChild(n),n.submit(),document.body.removeChild(n)}};n.Z=t},39260:function(e,n,l){l.d(n,{ws:function(){return r}});var t=window,o=(t.$fn,t.$http),r=function(e){var n=e.api,l=e.change,t=e.param,r=e.way,i=e.mul,a=document.querySelector("#jz-upload");a||(a=document.createElement("input"),i&&a.setAttribute("multiple","multiple"),a.setAttribute("type","file")),a.click(),a.onchange=function(e){var i=function(e,n,l){for(var t=new FormData,o=0;o<n.length;o++)t.append(e,n[o]);if(null!==t.get(e)){if(l)for(var r in l)l.hasOwnProperty(r)&&t.append(r,l[r]);return t}}("file",e.target.files,t);o.upload(null,n,{param:i,way:r}).then((function(e){null==l||l(e)})),a.value=""}}},79733:function(e,n,l){l.r(n),l.d(n,{default:function(){return E}});var t=l(67294),o=l(16550),r=l(39260),i=l(73906);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function d(e,n){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),l.push.apply(l,t)}return l}function u(e){for(var n=1;n<arguments.length;n++){var l=null!=arguments[n]?arguments[n]:{};n%2?d(Object(l),!0).forEach((function(n){c(e,n,l[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):d(Object(l)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(l,n))}))}return e}function c(e,n,l){return(n=function(e){var n=function(e,n){if("object"!==a(e)||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var t=l.call(e,"string");if("object"!==a(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(n)?n:String(n)}(n))in e?Object.defineProperty(e,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[n]=l,e}var f=window,s=f.$fn,p=f.$,m=f.$config,v=f.$http;function b(){return b=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var t in l)Object.prototype.hasOwnProperty.call(l,t)&&(e[t]=l[t])}return e},b.apply(this,arguments)}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){if(e){if("string"==typeof e)return w(e,n);var l=Object.prototype.toString.call(e).slice(8,-1);return"Object"===l&&e.constructor&&(l=e.constructor.name),"Map"===l||"Set"===l?Array.from(e):"Arguments"===l||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?w(e,n):void 0}}function w(e,n){(null==n||n>e.length)&&(n=e.length);for(var l=0,t=new Array(n);l<n;l++)t[l]=e[l];return t}var h=window,k=h.$lazy,S=h.$fn,R=h.$,A=h.$config,P=k.load((function(){return Promise.all([l.e(490),l.e(2577),l.e(4448),l.e(1498),l.e(769),l.e(5817),l.e(1474)]).then(l.bind(l,41233))})),O=k.load((function(){return Promise.all([l.e(490),l.e(2577),l.e(4448),l.e(3985),l.e(1498),l.e(557),l.e(5777),l.e(249),l.e(769),l.e(6686),l.e(2171)]).then(l.bind(l,18542))})),j=k.load((function(){return Promise.all([l.e(490),l.e(2577),l.e(4448),l.e(3985),l.e(1498),l.e(557),l.e(5777),l.e(769),l.e(2506)]).then(l.bind(l,19379))})),C=k.hook((function(){return Promise.all([l.e(490),l.e(2577),l.e(4448),l.e(3985),l.e(1498),l.e(557),l.e(5777),l.e(769),l.e(295),l.e(6439)]).then(l.bind(l,56439))})),x=k.load((function(){return l.e(8550).then(l.bind(l,8550))})),E=function(e){var n,l,a=e.data,d=e.className,f=e.style,w=e.size,h=void 0===w?"small":w,k=e.align,E=void 0===k?"end":k,$=e.loading,N=e.refresh,D=e.back,I=e.table,T=e.isTable,M=e.keys,z=(0,o.k6)(),B=(n=(0,t.useState)(a),l=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var t,o,r,i,a=[],d=!0,u=!1;try{if(r=(l=l.call(e)).next,0===n){if(Object(l)!==l)return;d=!1}else for(;!(d=(t=r.call(l)).done)&&(a.push(t.value),a.length!==n);d=!0);}catch(e){u=!0,o=e}finally{try{if(!d&&null!=l.return&&(i=l.return(),Object(i)!==i))return}finally{if(u)throw o}}return a}}(n,l)||g(n,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),U=B[0],_=B[1];(0,t.useEffect)((function(){return _(a)}),[a]),(0,t.useEffect)((function(){_((function(e){return N&&(e=[].concat(y(e),[{mode:"refresh"}])),D&&(e=[].concat(y(e),[{mode:"back"}])),e}))}),[]);var L=function(e){return function(e){var n,l,t,o,a=e.index,d=e.option,f=e.tableConfig,b=void 0===f?{}:f,y=e.history,g=null!=d?d:{},w=g.label,h=g.mode,k=g.click,S=g.to,R=g.toNext,A=g.link,P=g.fileType,O=g.fileName,j=g.downway,C=void 0===j?"blob":j,x=g.msg,E=g.successText,$=g.api,N=g.infoApi,D=g.onSuccess,I=g.way,T=g.param,M=g.id,z=g.r,B=g.c,U=g.rs,_=g.rc,L=g.mul,K=g.abs,Z=g.must,F=g.backData,W=g.backInfo,q=g.backParam,G=g.onBack,H=g.change,J=g.config,Q=s.getResult(J);T=s.getResult(T)||s.getResult(null==Q?void 0:Q.param),_=s.getResult(_),z=s.getResult(z),B=s.getResult(B),M=s.getResult(M);var V=null!=b?b:{},X=V.ctrApi,Y=V.row,ee=V.clearApi,ne=V.delApi,le=V.modApi,te=V.addApi,oe=V.record,re=oe;X=X||(null==Q?void 0:Q.ctrApi);var ie=null!==(n=null==b?void 0:b.idStr)&&void 0!==n?n:m.pullIdName,ae=null!==(l=(null==d?void 0:d.sidStr)||(null==d?void 0:d.idStr)||(null==b?void 0:b.idStr))&&void 0!==l?l:m.postIdName,de=null!==(t=(null==d?void 0:d.bidStr)||(null==d?void 0:d.idStr)||(null==b?void 0:b.idStr))&&void 0!==t?t:m.pullIdName,ue=null!==(o=null==d?void 0:d.idStr)&&void 0!==o?o:m.postIdName;re&&!M&&(M=oe[ie]),(ee=(null==Q?void 0:Q.clearApi)||(null==d?void 0:d.clearApi)||ee)&&(ee=s.isString(ee)?ee:b.api);var ce,fe=s.getResult((null==b?void 0:b.tableRef)||d.tableRef),se=s.getResult((null==b?void 0:b.searchRef)||d.searchRef),pe=[],me=null;if(Y&&(pe=null==fe||null===(ce=fe.keys)||void 0===ce?void 0:ce.call(fe),me=s.isArray(pe)?fe.rows:function(){return[]}),k)k(re?{tableRef:fe,searchRef:se,index:a,row:oe}:{keys:pe,rows:me,searchRef:se,tableRef:fe,label:w});else if(S)p.push(y,S,T);else if(R)p.pushNext(y,R,T);else if(A)window.open(A);else if("img"===h)$?(K||(T=u(c({},ue,M),T)),M=T?null:String(M),v.pull(null,$,{id:M,param:T}).then((function(e){e="data:image/jpg;base64,".concat(e).replace(/[\r\n]/g,""),window.$imageModalRef().open({data:e,preview:!1,title:d.title||w})}))):Q&&window.$imageModalRef().open(Q);else if("download"===h){var ve;if("url"===C)v[null!==(ve=I)&&void 0!==ve?ve:"pull"](null,$,{param:T,loading:!0,loadingText:w+"中"}).then((function(e){var n=F?F(e):e;window.open(n),s.msg.success("文件下载成功")}));else if("form"===C)i.Z.form(m.api()+$);else{var be;v[null!==(be=I)&&void 0!==be?be:"download"](null,$,{param:T,loading:!0,loadingText:w+"中"}).then((function(e){i.Z.blob(e,{fileName:s.getResult(O),fileType:P}),s.msg.success("文件下载成功")}))}}else if("upload"===h){var ye;(0,r.ws)({api:$,change:H,param:T,way:null!==(ye=I)&&void 0!==ye?ye:"post",mul:L})}else if("submit"===h){var ge;I=null!==(ge=I)&&void 0!==ge?ge:"post",v[I](null,$,{param:T}).then((function(){s.msg.success(E||"".concat(w,"成功")),fe&&(z&&fe.refresh(),B&&fe.clearKeys(),!_||z||B||fe.refreshClear()),ee&&s.indexDBRemove(ee),null==D||D({tableRef:fe})}))}else if(["confirm","del","delPop","clear"].includes(h)){var we,he=d.setParam,ke=d.setNewParam,Se=d.isStr;h.includes("del")&&($=d.api||ne||X||b.api),L=null!==(we=L)&&void 0!==we?we:m.delMul;var Re,Ae,Pe=re?L?[M]:M:pe;if(Pe||(Pe=L?[M]:M),T=s.getResult(T,{param:T,keys:pe,rows:me,ids:Pe}),"clear"===h&&(_=1),["del","delPop"].includes(h))I=null!==(Re=I)&&void 0!==Re?Re:null!==(Ae=null==m?void 0:m.delWay)&&void 0!==Ae?Ae:"post",w=m.btnName[h],_=1,U=0;else if("confirm"===h){var Oe,je;I=null!==(Oe=I)&&void 0!==Oe?Oe:null!==(je=null==m?void 0:m.confirmWay)&&void 0!==je?je:"post"}var Ce=function(){return new Promise((function(e,n){var l;K||(T=u(c({},ue,Se?String(Pe):Pe),T),T=he?u(u({},T),he(T)):T,ke&&(T=ke(T))),s.isEmpty(M)&&(M=T?null:String(Pe)),v[null!==(l=I)&&void 0!==l?l:"post"](null,$,{id:M,param:T,loading:"delPop"===h,onError:n}).then((function(n){e(),s.msg.success(E||"".concat(w,"成功")),fe&&(z&&fe.refresh(U),B&&fe.clearKeys(),!_||z||B||fe.refreshClear(U)),ee&&s.indexDBRemove(ee),null==D||D(n)}))}))};"delPop"===h?Ce():s.confirm({msg:x||"确认".concat(w,"此数据？"),onOk:Ce})}else if("formModal"===h||"mod"===h||"list"===h){var xe,Ee,$e,Ne,De,Ie=u({idStr:ie,sidStr:ae,bidStr:de,id:M,param:T,abs:K,tableRef:fe,mode:h,label:w},Q),Te=null!==(xe=null==Ie?void 0:Ie.form)&&void 0!==xe?xe:{};Ie.form=u({id:M,way:I,must:Z,tableRef:fe,clearApi:ee,param:T,mode:h,label:w,api:Te.api||X,r:null!==(Ee=Q.r)&&void 0!==Ee?Ee:z,c:null!==($e=Q.c)&&void 0!==$e?$e:B,rc:null!==(Ne=Q.rc)&&void 0!==Ne?Ne:_,rs:null!==(De=Q.rs)&&void 0!==De?De:U},Te),"mod"===h&&(b.addConfig&&(b.addConfig.mod=!0,b.addConfig.add=!1),Ie.form.r=1,Ie.form.mod=!0,Ie.form.add=!1,Ie.backInfo=(null==Q?void 0:Q.backInfo)||W);var Me=Q.form;Ie.modal=null==Q?void 0:Q.modal,Ie.backData=(null==Me?void 0:Me.backData)||(null==Q?void 0:Q.backData)||F,Ie.backParam=(null==Q?void 0:Q.backParam)||q,Ie.form.clearApi=ee,Ie.form.api=(null==Me?void 0:Me.api)||$||le||X||b.api,Ie.form.refApi=b.api,Ie.form.mode=h,!1===N||!1===(null==Me?void 0:Me.infoApi)?Ie.form.infoApi=!1:!0===N||!0===(null==Me?void 0:Me.infoApi)?Ie.form.infoApi=(null==Me?void 0:Me.api)||$:Ie.form.infoApi=(null==Me?void 0:Me.infoApi)||N||b.infoApi||X||b.api,window.$formModalRef().open(Ie)}else if("tableModal"===h){var ze=u({idStr:ie,sidStr:ae,bidStr:de,id:M,param:T,r:z,c:B,rs:U,rc:_,abs:K,must:Z,way:I,tableRef:fe,label:w,clearApi:ee},Q);ze.api=(null==Q?void 0:Q.api)||$,ze.infoApi=(null==Q?void 0:Q.infoApi)||N,ze.refApi=b.api,ze.backData=(null==Q?void 0:Q.backData)||F,ze.backParam=(null==Q?void 0:Q.backParam)||q,ze.keyStr=(null==Q?void 0:Q.keyStr)||(null==d?void 0:d.keyStr),window.$tableModalRef().open(ze)}else if("modal"===h)window.$modalRef().open(Q);else if("back"===h)s.back(),null==G||G();else if("refresh"===h){var Be,Ue;null===(Be=window)||void 0===Be||null===(Ue=Be.refreshRouter)||void 0===Ue||Ue.call(Be)}else if("add"===h){var _e,Le;b.addConfig&&(b.addConfig.mod=!1,b.addConfig.add=!0);var Ke=u(u({mode:h,backData:F,tableRef:fe},Q),b.addConfig),Ze=null!==(_e=Ke.form)&&void 0!==_e?_e:{};Ke.form=u({r:!Boolean(Y),rc:Boolean(Y),rs:null!==(Le=null==Q?void 0:Q.rs)&&void 0!==Le?Le:U,api:Ze.api||$||te||X||b.api,refApi:b.api,clearApi:ee,infoApi:N,mode:h,label:w,param:T,add:!0,mod:!1},Ze),window.$formModalRef().open(u(u({},Ke),{},{table:b}))}"mod"!==h&&"add"!==h&&null!=b&&b.addConfig&&(b.addConfig.mod=!1,b.addConfig.add=!1)}({option:e,history:z,tableConfig:I})},K=(0,t.useCallback)((function(n){var l=n.mode,t=n.disabled,o=n.isKeys;if(S.getResult(e.disabled))return!0;if(["del","delPop"].includes(l)&&!T&&(o=1),!o||null==I||!I.row)return S.getResult(t);var r=I.tableRef;return r?0===(null==M?void 0:M.length)||S.getResult(t,{keys:M,rows:r().rows}):void 0}),[M]);return S.hasArray(U)?t.createElement(x,{align:E,className:d,style:f},U.map((function(e,n){if(!S.hasObject(e))return null;var l=e.hide,o=e.mode,r=e.label,i=e.ghost,a=e.show;e.label=r||A.btnName[o],e.ghost=T?null==i||i:S.isBoolean(i)?i:!!["del","delPop","back","refresh","clear"].includes(o)||i;var d=K(e);if(l)return null;if(!1===a)return null;if("delPop"===o){var u,c=null!==(u=e.msg)&&void 0!==u?u:"确认".concat(e.label,"此数据？");return t.createElement(j,{title:c,onConfirm:L.bind(null,e),key:n},t.createElement(P,b({size:h,loading:$},e,{disabled:d})))}return"dropdown"===o?t.createElement(O,b({size:h,loading:$},e,{disabled:d,key:n,onClick:L})):"upload"===o&&e.api?t.createElement(C,b({listType:"button",showUploadList:!1,loading:$},e,{key:n})):"div"===o?t.createElement("div",b({},e,{key:n}),R.cpt(e.slot)):"ex"===o?t.createElement("div",b({className:"ex"},e,{key:n}),R.cpt(e.slot)):e.slot?t.createElement(t.Fragment,{key:n},R.cpt(e.slot)):t.createElement(P,b({size:h,loading:$},e,{disabled:d,key:n,onClick:L.bind(null,e)}))}))):null}}}]);